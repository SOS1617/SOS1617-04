<!DOCTYPE html>
<html ng-app="PriceManagerApp">

<head>
    <title>
        PriceApp
    </title>
    <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap-theme.min.css" type="text/css" />
    <script type="text/javascript" src="/bower_components/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/bower_components/angular/angular.min.js"></script>
    <script type="text/javascript" src="/price/price-manager.js"></script>
    <script type="text/javascript" src="/price/list-ctrl-price.js"></script>
    <style type="text/css">
        .form-control {
            width: 250px;
            display:inline;
        }
    </style>
</head>

<body>
    
    <div ng-controller="ListCtrl">
        <h1 style="display:inline;">Price</h1>
        
        <!-- -->
        <button class="button btn btn-primary" ng-click="loadInitial()">Load Initial Data</button>
        
        <!-- DELETE ALL -->
        <button class="button btn btn-danger btn-lg" ng-click="deleteAll()">Delete All</button>
        
        <!-- API KEY -->
        <hr>
        <b>Api Key(12345):</b>
        <span id="errorApiKey" style="color:red;"></span>
        <input class="form-control" ng-model="api" placeholder="12345" />
        <button class="button btn btn-primary" ng-click="setApikey(api)">Send</button>
        
        <!-- BUSQUEDA POR PROVINCIA -->
        <hr>
        <h2>Búsqueda</h2>
        <b>Provincia:</b>
        <input class="form-control" ng-model="province" />
        <button class="button btn btn-primary" ng-click="setProvince(province)">Send</button>
        
        <!-- BUSQUEDA POR ANYO -->
        <b>Año:</b>
        <input class="form-control" ng-model="year" />
        <button class="button btn btn-primary" ng-click="setYear(year)">Send</button>
        
        <!-- FILTRAR -->
        <b>Filtrar datos de la tabla:</b>
        <span class="glyphicon glyphicon-search"></span><input type="text" name="search" ng-model="test" placeholder="Filtrar">
        
        <!-- ADD -->
        <hr>
        <h2>Add new stat:</h2><span id="addError" style="color:red;"></span><span id="addOk" style="color:green;"></span>
       <table id="add">
            <thead>
                <tr>
                    <th>Province</th>
                    <th>Year</th>
                    <th>priceaceite</th>
                    <th>priceextra</th>
                    <th>pricevirgen</th>
                    <th>Add</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><input class="form-control" ng-model="newStat.province" /></td>
                    <td><input class="form-control" ng-model="newStat.year" /></td>
                    <td><input class="form-control" ng-model="newStat.priceaceite" /></td>
                    <td><input class="form-control" ng-model="newStat.priceextra" /></td>
                    <td><input class="form-control" ng-model="newStat.pricevirgen" /></td>
                    <td><button class="button btn btn-primary" ng-click="addStat()">Add</button></td>
                </tr>
            </tbody>
        </table>
        
        <!-- EDITAR -->
        <hr>
        <h2>Edit stat:</h2><span id="editOk" style="color:green;"></span>
       <table id="edit">
            <thead>
                <tr>
                    <th>Province</th>
                    <th>Year</th>
                    <th>priceaceite</th>
                    <th>priceextra</th>
                    <th>pricevirgen</th>
                    <th>Add</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><input class="form-control" ng-model="editStat.province" /></td>
                    <td><input class="form-control" ng-model="editStat.year" /></td>
                    <td><input class="form-control" ng-model="editStat.priceaceite" /></td>
                    <td><input class="form-control" ng-model="editStat.priceextra" /></td>
                    <td><input class="form-control" ng-model="editStat.pricevirgen" /></td>
                    <td><button class="button btn btn-primary" ng-click="addStat()">Add</button></td>
                </tr>
            </tbody>
        </table>
                
        <!-- -->
        <hr>
        <span id="NoResults" style="visibility:hidden;color:red;font:bold 16px;">No hay resultados que mostrar.</span>
        <table id="results" class="table table-striped">
            <thead>
                <tr>
                    <th>Province</th>
                    <th>Year</th>
                    <th>priceaceite</th>
                    <th>priceextra</th>
                    <th>pricevirgen</th>
                    <th>ACTIONS</th>
                    <th>DELETE</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="stat in stats| filter:test|  offset: currentPage*itemsPerPage |   limitTo: itemsPerPage">
                    <td>{{stat.province}}</td>
                    <td>{{stat.year}}</td>
                    <td>{{stat.priceaceite}}</td>
                    <td>{{stat.priceextra}}</td>
                    <td>{{stat.pricevirgen}}</td>
                    
                    <td><button class="btn waves-effect waves-light" ng-click="editStat(stat)"><i class="material-icons">Edit</i></button></td>
                    
                    <!--
                    <td><button class="button btn btn-info" ng-click="update(stat.province,stat.year)">Update</button></td>-->
                    <td><button class="button btn btn-danger" ng-click="deleteStat(stat.province,stat.year)">Delete</button></td>
                </tr>
            </tbody>
            <tfoot>
                <td colspan="3">
                    <div class="pagination">
                        <ul>
                            <button class="button btn btn-success" ng-click="prevPage()"><span class="glyphicon glyphicon-triangle-left" aria-hidden="true"></span>Prev</a></button>
                            </li>
                            <li ng-repeat="n in range()" ng-class="{active: n == currentPage}" ng-click="setPage(n)">
                                <a href="#">{{n+1}}</a>
                            </li>
                            <button class="button btn btn-success" ng-click="nextPage()"> Next<span class="glyphicon glyphicon-triangle-right" aria-hidden="true"></span></a>
                            </li>
                        </ul>
                        View <select class="btn dropdown-toggle btn-default" ng-model="viewby" ng-change="setItemsPerPage(viewby)">
                            <option>3</option><option>5</option><option>10</option><option>20</option><option>30</option><option>40</option><option>50</option>
                        </select> stats at a time.

                    </div>
                    
                </td>
            </tfoot>

        </table>
        
       
       <hr>
    </div>
</body>

</html>